<!doctype html>
<html lang="en">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<title>monitor</title>
	<link rel="shortcut icon" href="/asst/hms.256.ico" />
	<link rel="apple-touch-icon" href="/asst/hms.256.png" />

	<!-- Preloader at first -->
	<link rel="stylesheet" type="text/css" href="/devm/preloader.css">
</head>

<body>
	<div class="preloader">
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
	</div>

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<!-- normalize.min.css v8.0.1-->
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
	<!-- Project CSS -->
	<link rel="stylesheet" type="text/css" href="/devm/stat.css?0.1.0">

	<div id="app">
		<h2>home media server monitor</h2>

		<div id="accordion">

			<div class="card">
				<div class="card-header">
					<a class="card-link" data-toggle="collapse" href="#collapse-servinfo">server info</a>
				</div>
				<div id="collapse-servinfo" class="collapse show">
					<div class="card-body stattable">
						<div class="row">
							<div class="col-sm-6 field-name">server version:</div>
							<div class="col-md-6 field-value">{{servinfo.buildvers}}</div>
						</div>
						<div class="row">
							<div class="col-sm-6 field-name">server start time:</div>
							<div class="col-md-6 field-value">{{(new Date(servinfo.started)).toLocaleString()}}</div>
						</div>
						<div class="row">
							<div class="col-sm-6 field-name">golang version:</div>
							<div class="col-md-6 field-value">{{servinfo.govers}}</div>
						</div>
						<div class="row">
							<div class="col-sm-6 field-name">host operation system:</div>
							<div class="col-md-6 field-value">{{servinfo.os}}</div>
						</div>
						<div class="row">
							<div class="col-sm-6 field-name">number of logical CPUs:</div>
							<div class="col-md-6 field-value">{{servinfo.numcpu}}</div>
						</div>
						<div class="row">
							<div class="col-sm-6 field-name">max number of used CPUs:</div>
							<div class="col-md-6 field-value">{{servinfo.maxprocs}}</div>
						</div>
						<div class="row">
							<div class="col-sm-6 field-name">program directory:</div>
							<div class="col-md-6 field-value">{{servinfo.destpath}}</div>
						</div>
						<div class="row">
							<div class="col-sm-6 field-name">data root directory:</div>
							<div class="col-md-6 field-value">{{servinfo.rootpath}}</div>
						</div>
					</div>
				</div>
			</div>

			<div class="card">
				<div class="card-header">
					<a class="card-link collapsed" data-toggle="collapse" href="#collapse-memory">memory usage &amp; garbage collector</a>
				</div>
				<div id="collapse-memory" class="collapse">
					<div class="card-body stattable">
						<div class="row">
							<div class="col-sm-6 field-name">server running time:</div>
							<div class="col-md-6 field-value">{{fmtduration(memgc.running)}}</div>
						</div>
						<div class="row">
							<div class="col-sm-6 field-name">bytes allocated and not yet freed:</div>
							<div class="col-md-6 field-value">{{memgc.heapalloc}}</div>
						</div>
						<div class="row">
							<div class="col-sm-6 field-name">bytes obtained from system:</div>
							<div class="col-md-6 field-value">{{memgc.heapsys}}</div>
						</div>
						<div class="row">
							<div class="col-sm-6 field-name">bytes allocated (even if freed):</div>
							<div class="col-md-6 field-value">{{memgc.totalalloc}}</div>
						</div>
						<div class="row">
							<div class="col-sm-6 field-name">heap size for next GC cycle:</div>
							<div class="col-md-6 field-value">{{memgc.nextgc}}</div>
						</div>
						<div class="row">
							<div class="col-sm-6 field-name">number of GC cycles:</div>
							<div class="col-md-6 field-value">{{memgc.numgc}}</div>
						</div>
						<div class="row">
							<div class="col-sm-6 field-name">time used by GC (nanoseconds):</div>
							<div class="col-md-6 field-value">{{memgc.pausetotalns}}</div>
						</div>
						<div class="row">
							<div class="col-sm-6 field-name">fraction of CPU time used by GC:</div>
							<div class="col-md-6 field-value">{{memgc.gccpufraction}}</div>
						</div>
					</div>
				</div>
			</div>

			<div class="card">
				<div class="card-header">
					<a class="card-link collapsed" data-toggle="collapse" href="#collapse-console">Console output</a>
				</div>
				<div id="collapse-console" class="collapse">
					<div class="card-body">
						<button v-on:click="ongetlog" type="button" class="btn btn-primary console-but">Update</button>
						<div class="btn-group">
							<button v-on:click="onnoprefix" type="button" v-bind:class="isnoprefix" class="btn console-but">No prefix</button>
							<button v-on:click="ontime" type="button" v-bind:class="istime" class="btn console-but">Time</button>
							<button v-on:click="ondatetime" type="button" v-bind:class="isdatetime" class="btn console-but">Date-time</button>
						</div>
						<pre ref="console" class="console-window">{{consolecontent}}</pre>
					</div>
				</div>
			</div>

		</div>
	</div>

	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

	<!-- development version, includes helpful console warnings -->
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

	<!-- common functionality used in all components -->
	<script src="/devm/devmode.js?0.1.0"></script>
	<script src="/devm/request.js?0.1.0"></script>
	<!-- load application script -->
	<script src="/devm/statpage.js?0.1.0"></script>
</body>
</html>
